var success=!1;function attributeToString(t){return"string"!=typeof t&&"undefined"===(t+="")&&(t=""),jQuery.trim(t)}function push_to_queue(t,e,a,r){ShopifyAPI.queue.push({variantId:t,quantity:e,properties:a}),"function"==typeof r&&r()}function push_to_queue_recharge(t,e,a,r,i,n){ShopifyAPI.queueR.push({variantId:t,quantity:e,frequency:a,unit_type:r,properties:i}),"function"==typeof n&&n()}"undefined"==typeof ShopifyAPI&&(ShopifyAPI={}),ShopifyAPI.onCartUpdate=function(t){console.info("There are now "+t.item_count+" items in the cart."),window.location.href="/cart"},ShopifyAPI.money_format="{{amount}}",ShopifyAPI.formatMoney=function(t,e){this.money_format=e+"{{amount}}","string"==typeof t&&(t=t.replace(".",""));var a="",r=/\{\{\s*(\w+)\s*\}\}/,i=this.money_format;function n(t,e){return void 0===t?e:t}function o(t,e,a,r){if(e=n(e,2),a=n(a,","),r=n(r,"."),isNaN(t)||null==t)return 0;var i=(t=(t/100).toFixed(e)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(i[1]?r+i[1]:"")}switch(i.match(r)[1]){case"amount":a=o(t,2);break;case"amount_no_decimals":a=o(t,0);break;case"amount_with_comma_separator":a=o(t,2,".",",");break;case"amount_no_decimals_with_comma_separator":a=o(t,0,".",",")}return i.replace(r,a)},ShopifyAPI.updateCartNote=function(t,e){var a={type:"POST",url:"/cart/update.js",data:"note="+attributeToString(t),dataType:"json",success:function(t){"function"==typeof e?e(t):ShopifyAPI.onCartUpdate(t)},error:function(t,e){ShopifyAPI.onError(t,e)}};jQuery.ajax(a)},ShopifyAPI.onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");data.message&&alert(data.message+"("+data.status+"): "+data.description)},ShopifyAPI.queue=[],ShopifyAPI.queueR=[],ShopifyAPI.moveAlong=function(t){if(ShopifyAPI.queue.length){var e=ShopifyAPI.queue.shift();success=!1,ShopifyAPI.addItem(e.variantId,e.quantity,e.properties)}},ShopifyAPI.moveAlongR=function(t){if(ShopifyAPI.queueR.length){var e=ShopifyAPI.queueR.shift();success=!1,ShopifyAPI.addItemToCart(e.variantId,e.quantity,e.frequency,e.unit_type)}},ShopifyAPI.addItem=function(t,e,a,r){var i={type:"POST",url:"/cart/add.js",data:"quantity="+(e=e||1)+"&id="+t,dataType:"json",success:function(t){ShopifyAPI.moveAlong(),"function"==typeof r&&r(t),success=!0},error:function(t,e){ShopifyAPI.onError(t,e)}};jQuery.ajax(i)},ShopifyAPI.addItemToCart=function(t,e,a,r,i){data={id:t,quantity:e,properties:{shipping_interval_frequency:a,shipping_interval_unit_type:r}},jQuery.ajax({type:"POST",url:"/cart/add.js",data:data,dataType:"json",success:function(){i&&void 0!==i?t==i?location.reload():removeOldVariant(i):(ShopifyAPI.moveAlongR(),success=!0)},error:function(t,e){}})},ShopifyAPI.addItemFromForm=function(t,e,a){var r={type:"POST",url:"/cart/add.js",data:jQuery(t).serialize(),dataType:"json",success:function(a){"function"==typeof e?e(a,t):ShopifyAPI.onItemAdded(a,t)},error:function(t,e){"function"==typeof a?a(t,e):ShopifyAPI.onError(t,e)}};jQuery.ajax(r)},ShopifyAPI.getCart=function(t){jQuery.getJSON("/cart.js",function(e,a){"function"==typeof t?t(e):ShopifyAPI.onCartUpdate(e)})},ShopifyAPI.changeItem=function(t,e,a,r){var i={type:"POST",url:"/cart/change.js",data:"quantity="+e+"&id="+t+"&line="+a,dataType:"json",success:function(t){"function"==typeof r?r(t):ShopifyAPI.onCartUpdate(t)},error:function(t,e){ShopifyAPI.onError(t,e)}};jQuery.ajax(i)},$.ajaxSetup({cache:!1});var ajaxCart=function(module,$){"use strict";var init,loadCart,settings,$body,onCartPage,$formContainer,$form,$addToCart,$cartCountSelector,$cartCostSelector,$cartContainer,$drawerContainer,$addToCartMultiple,$multipleForm,$qtySelectorMulti,$addToCartType,$purchaseType,$deliverEvery,$purchaseTypeHolder,$qtySelector,$price,$discountedPrice,updateCountPrice,formOverride,itemAddedCallback,itemCheckIfAddToCartComplete,itemErrorCallback,cartUpdateCallback,buildCart,cartCallback,adjustCart,adjustCartCallback,createQtySelectors,qtySelectors,validateQty,removeItem,addCustomItems,showDeliverEvery,showPurchaseType,getTotalQuantity,dynamicCalculations,returnSinglePrice;function updateQuantity(t,e,a,r){var i=$('.ajaxcart__row[data-id="'+t+'"]').addClass("is-loading");0===e&&i.parent().addClass("is-removed"),setTimeout(function(){r?ShopifyAPI.changeItem(t,e,a):ShopifyAPI.changeItem(t,e,a,adjustCartCallback)},250)}return init=function(t){onCartPage="/cart"===window.location.pathname,settings={formContainerSelector:"#AddToCartForm",formSelector:'form[action^="/cart/add"]',multipleForm:".multiple-product-form",cartContainer:"#CartContainer",addToCartSelector:"#AddToCart",addToCartMultiple:"#AddToCartMultiple",qtySelector:"input[name='quantity']",purchaseType:"input[name='purchase-type']",purchaseTypeHolder:".purchase-type",deliverEvery:".delivery-every-holder",qtySelectorMulti:'.product-variant input[name="quantity"]',price:".main-price",discountedPrice:".discounted-price",cartCountSelector:null,cartCostSelector:null,moneyFormat:"${{amount}}",disableAjaxCart:!1,enableQtySelectors:onCartPage},$.extend(settings,t),$formContainer=$(settings.formContainerSelector),$form=$formContainer.find(settings.formSelector),$cartContainer=$(settings.cartContainer),$addToCart=$formContainer.find(settings.addToCartSelector),$cartCountSelector=$(settings.cartCountSelector),$cartCostSelector=$(settings.cartCostSelector),$addToCartMultiple=$(settings.addToCartMultiple),$multipleForm=$(settings.multipleForm),$qtySelector=$(settings.qtySelector),$purchaseType=$(settings.purchaseType),$deliverEvery=$(settings.deliverEvery),$purchaseType=$(settings.purchaseType),$qtySelectorMulti=$(settings.qtySelectorMulti),$price=$(settings.price),$discountedPrice=$(settings.discountedPrice),$body=$("body"),settings.enableQtySelectors&&qtySelectors(),settings.disableAjaxCart||($addToCartMultiple.length||$addToCart.length)&&addCustomItems(),adjustCart(),removeItem(),showDeliverEvery(),dynamicCalculations()},loadCart=function(){$body.addClass("drawer--is-loading"),ShopifyAPI.getCart(cartUpdateCallback)},dynamicCalculations=function(){$(".product-variant input").change(function(){}),$qtySelectorMulti.on("change",function(){$price.html(returnSinglePrice()),$discountedPrice.html(returnSinglePrice("discounted"))})},returnSinglePrice=function(t){let e,a,r,i,n;return n=$(".product_quan_main_right:not(.notify-message-holder)").length<=0?1:getTotalQuantity(),"true"==$price.data("price-recharge")?(e=ShopifyAPI.formatMoney(n*$price.attr("data-rc-price"),$price.html().charAt(0)).substr(1),i=n*$price.attr("data-rc-price")):(e=ShopifyAPI.formatMoney(n*$price.attr("data-onetime-price"),$price.html().charAt(0)).substr(1),i=n*$price.attr("data-onetime-price")),"discounted"==t?($discountedPrice.attr("data-compare-price")&&"0"!=$discountedPrice.attr("data-compare-price")?(a=ShopifyAPI.formatMoney(n*$discountedPrice.attr("data-compare-price"),$price.html().charAt(0)).substr(1),r=n*$discountedPrice.attr("data-compare-price")):(a=ShopifyAPI.formatMoney(n*$discountedPrice.attr("data-compare-custom-price"),$price.html().charAt(0)).substr(1),r=n*$discountedPrice.attr("data-compare-custom-price")),r>i?$discountedPrice.removeClass("hide"):$discountedPrice.addClass("hide"),a):"true"==$price.data("price-recharge")?ShopifyAPI.formatMoney(n*$price.attr("data-rc-price"),$price.html().charAt(0)).substr(1):ShopifyAPI.formatMoney(n*$price.attr("data-onetime-price"),$price.html().charAt(0)).substr(1)},updateCountPrice=function(t){$cartCountSelector&&($cartCountSelector.html(t.item_count).removeClass("hidden-count"),0===t.item_count&&$cartCountSelector.addClass("hidden-count")),$cartCostSelector&&$cartCostSelector.html(Shopify.formatMoney(t.total_price,settings.moneyFormat))},formOverride=function(){$form.on("submit",function(t){t.preventDefault(),$addToCartMultiple.removeClass("is-added").addClass("is-adding"),$(".qty-error").remove(),ShopifyAPI.addItemFromForm(t.target,itemAddedCallback,itemErrorCallback)})},addCustomItems=function(){$addToCartType="one-time",$multipleForm.on("submit",function(t){if($addToCartMultiple.removeClass("is-added").addClass("is-adding"),t.preventDefault(),$(this).find('input[name="purchase-type"][value="Recurring"]:checked').length>0){$addToCartType="recurring";var e=$(this).find("select#shipping_interval_frequency").val()}else $addToCartType="one-time";$(this).find($qtySelector).each(function(){let t=$(this).data("id"),a=$(this).data("recharge-id"),r=$(this).val();"one-time"==$addToCartType?push_to_queue(t,r,{}):push_to_queue_recharge(a,r,e,"Weeks",{})}),"one-time"==$addToCartType?ShopifyAPI.moveAlong():ShopifyAPI.moveAlongR(),itemCheckIfAddToCartComplete(ShopifyAPI.queue.length)})},itemCheckIfAddToCartComplete=function(){if(0==ShopifyAPI.queue.length)var t=setInterval(function(){1==success&&(clearInterval(t),setTimeout(function(){itemAddedCallback()},500))},500);else setTimeout(function(){itemCheckIfAddToCartComplete(ShopifyAPI.queue.length)},200)},showDeliverEvery=function(){$purchaseType.on("change",function(){switch($(this).val()){case"Recurring":$deliverEvery.show(),$price.data("price-recharge","true"),$price.html(returnSinglePrice()),$discountedPrice.html(returnSinglePrice("discounted")).removeClass("hide"),$addToCartMultiple.find("[data-add-to-cart-texts]").text("Subscribe");break;case"One Time":$deliverEvery.hide(),$price.data("price-recharge","false"),$price.html(returnSinglePrice()),$discountedPrice.html(returnSinglePrice("discounted")),$addToCartMultiple.text("Add To Cart"),$('input[name="purchase-type"][value="Recurring"]').prop("checked",!1)}})},getTotalQuantity=function(){let t=0;return $qtySelectorMulti.each(function(){t=parseInt(t)+parseInt($(this).val())}),$price.attr("data-quantity",t),t},itemAddedCallback=function(t){$addToCartMultiple.removeClass("is-adding").addClass("is-added"),ShopifyAPI.getCart(cartUpdateCallback)},itemErrorCallback=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");$addToCart.removeClass("is-adding is-added"),data.message&&422==data.status&&$formContainer.after('<div class="errors qty-error">'+data.description+"</div>")},cartUpdateCallback=function(t){updateCountPrice(t),buildCart(t)},removeItem=function(){$cartContainer.on("click",".js-remove-from-cart",function(t){var e=$(t.target).attr("data-id"),a=$(t.target).attr("data-line");ShopifyAPI.changeItem(e,0,a,function(e){$(t.target).parents(".ajaxcart__product").addClass("is-removed"),setTimeout(function(){cartUpdateCallback(e)},500)})})},buildCart=function(t){$cartContainer.empty();var e,a=[],r={},i=$("#CartTemplate").html(),n=Handlebars.compile(i),o=[];$.each(t.items,function(t,e){var i=e.quantity+1,n=e.quantity-1,c=e.quantity;if(null!=e.image)var d=e.image.replace(/(\.[^.]*)$/,"_210x$1").replace("http:","");else d="//cdn.shopify.com/s/images/themes/product-1.png";var u=e.product_title,s=e.variant_title;"Default Title"==s&&(s=!1),r={id:e.variant_id,line:t+1,url:e.url,img:d,name:u,variation:s,itemAdd:i,itemMinus:n,itemQty:c,price:Shopify.formatMoney(e.price,settings.moneyFormat),numerousItems:c>1,vendor:e.vendor,properties:e.properties},a.push(r);var l=[];l.quantity=e.quantity,l.handle=e.handle,l.Vid=e.variant_id,null==e.variant_title&&(e.variant_title="Default Title"),l.variant_title=e.variant_title,o.push(l)}),"0"!=o.length&&loadMultiCart(o),e={items:a,note:t.note,totalPrice:Shopify.formatMoney(t.total_price,settings.moneyFormat)},$cartContainer.append(n(e)),cartCallback(t);var c=$(window).width();if(c>=320&&c<=767)jQuery(".mobile-header-message-currency").find(".currency-picker").val();else jQuery("#announcement-bar").find(".currency-picker").val()},cartCallback=function(t){$body.removeClass("drawer--is-loading"),$body.trigger("ajaxCart.afterCartLoad",t)},adjustCart=function(){$body.on("click",".ajaxcart__qty-adjust",function(){var t=$(this),e=t.data("id"),a=t.data("line"),r=t.siblings(".ajaxcart__qty-num"),i=parseInt(r.val().replace(/\D/g,""));i=validateQty(i);t.hasClass("ajaxcart__qty--plus")?i+=1:(i-=1)<=0&&(i=0),e?updateQuantity(e,i,a):r.val(i)}),$body.on("change",".ajaxcart__qty-num",function(){var t=$(this),e=t.data("id"),a=t.data("line"),r=parseInt(t.val().replace(/\D/g,""));r=validateQty(r);e&&updateQuantity(e,r,a)}),$body.on("focus",".ajaxcart__qty-adjust",function(){var t=$(this);setTimeout(function(){t.select()},50)}),$body.on("change",'textarea[name="note"]',function(){var t=$(this).val();ShopifyAPI.updateCartNote(t,function(t){})})},adjustCartCallback=function(t){updateCountPrice(t),setTimeout(function(){ShopifyAPI.getCart(buildCart)},150)},createQtySelectors=function(){$('input[type="number"]',$cartContainer).length&&$('input[type="number"]',$cartContainer).each(function(){var t=$(this),e=t.val(),a=e+1,r=e-1,i=e,n=$("#AjaxQty").html(),o=Handlebars.compile(n),c={id:t.data("id"),itemQty:i,itemAdd:a,itemMinus:r};t.after(o(c)).remove()}),$('a[href^="/cart/change"]',$cartContainer).length&&$('a[href^="/cart/change"]',$cartContainer).each(function(){$(this).addClass("ajaxcart__remove")})},qtySelectors=function(){var t=$('input[type="number"]');t.length&&(t.each(function(){var t=$(this),e=t.val(),a=t.attr("name"),r=t.attr("id"),i=e+1,n=e-1,o=e,c=$("#JsQty").html(),d=Handlebars.compile(c),u={id:t.data("id"),itemQty:o,itemAdd:i,itemMinus:n,inputName:a,inputId:r};t.after(d(u)).remove()}),$(".js-qty__adjust").on("click",function(){var t=$(this),e=t.data("id"),a=t.data("line"),r=t.siblings(".js-qty__num"),i=parseInt(r.val().replace(/\D/g,""));i=validateQty(i);t.hasClass("js-qty__adjust--plus")?i+=1:(i-=1)<=1&&(i=1),updateQuantity(e,i,a,!0),r.val(i)}))},validateQty=function(t){return(parseFloat(t)!=parseInt(t)||isNaN(t))&&(t=1),t},module={init:init,load:loadCart},module}(ajaxCart||{},jQuery);